import logging

from aiogram import Router
from aiogram.types import Message, ReplyKeyboardRemove
from aiogram.filters import Command
from aiogram.fsm.context import FSMContext
from aiogram.fsm.state import default_state

from keyboards.admin_keyboard import get_admin_main_keyboard
from keyboards.inline_keyboard import get_main_inline_keyboard
from filters import IsAdminFilter

logger = logging.getLogger(__name__)

router = Router()

@router.message(~IsAdminFilter(), Command('start'), default_state)
async def start_cmd(msg: Message):
    await msg.answer('üëã  –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∞—Å, –±—É–¥—É—â–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã!\n\nüöÄ  –ó–∞–¥–∞—á–Ω–∏–∫ –°++ - —ç—Ç–æ –ø—Ä–æ–µ–∫—Ç, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏ 1 –∫—É—Ä—Å–∞ –ú–æ—Å–∫–æ–≤—Å–∫–æ–≥–æ –ü–æ–ª–∏—Ç–µ—Ö–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –æ—Å–≤–æ–∏—Ç—å —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è C++.\n\nüìö  –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –≤–∞–º:\n\n –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è —è–∑—ã–∫–∞ C++.\n –û—Ç—Ç–æ—á–∏—Ç—å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏.\n –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–µ–º—ã.\n\nüí™  –£–∂–µ —Å–µ–π—á–∞—Å –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å –∫ —Ä–µ—à–µ–Ω–∏—é —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–¥–∞–Ω–∏–π! –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é, –∫–æ—Ç–æ—Ä–∞—è –≤–∞–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞, –∏ –ø—Ä–∏—Å—Ç—É–ø–∞–π—Ç–µ –∫ —Ä–∞–±–æ—Ç–µ. \n\nüåü  –ñ–µ–ª–∞–µ–º –≤–∞–º —É—Å–ø–µ—Ö–æ–≤ –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –æ—Ç–∫—Ä—ã—Ç–∏–π –≤ –º–∏—Ä–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è!', reply_markup=get_main_inline_keyboard())

@router.message(IsAdminFilter(), Command('start'), default_state)
async def start_cmd(msg: Message):
    await msg.answer('–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é —Ç–µ–±—è, –∞–¥–º–∏–Ω! üëã', reply_markup=get_admin_main_keyboard())
    await msg.answer('üöÄ  –ó–∞–¥–∞—á–Ω–∏–∫ –°++ - —ç—Ç–æ –ø—Ä–æ–µ–∫—Ç, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏ 1 –∫—É—Ä—Å–∞ –ú–æ—Å–∫–æ–≤—Å–∫–æ–≥–æ –ü–æ–ª–∏—Ç–µ—Ö–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –æ—Å–≤–æ–∏—Ç—å —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è C++.\n\nüìö  –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –≤–∞–º:\n\n –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è —è–∑—ã–∫–∞ C++.\n –û—Ç—Ç–æ—á–∏—Ç—å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏.\n –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–µ–º—ã.\n\nüí™  –£–∂–µ —Å–µ–π—á–∞—Å –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å –∫ —Ä–µ—à–µ–Ω–∏—é —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–¥–∞–Ω–∏–π! –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é, –∫–æ—Ç–æ—Ä–∞—è –≤–∞–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞, –∏ –ø—Ä–∏—Å—Ç—É–ø–∞–π—Ç–µ –∫ —Ä–∞–±–æ—Ç–µ. \n\nüåü  –ñ–µ–ª–∞–µ–º –≤–∞–º —É—Å–ø–µ—Ö–æ–≤ –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –æ—Ç–∫—Ä—ã—Ç–∏–π –≤ –º–∏—Ä–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è!', reply_markup=get_main_inline_keyboard())

@router.message(Command('help'), default_state)
async def help_cmd(msg: Message):
    await msg.answer('–ë–æ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –Ω–∞ —è–∑—ã–∫–µ Python, —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ aiogram, ORM SQLAlchemy –∏ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö SQLite.\n\n–ö–æ–º–∞–Ω–¥–∞: \n\n–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏: @JoMaska, @Polina_Petrova\n–•—É–¥–æ–∂–Ω–∏–∫: @doshiksha\n–°–æ–∑–¥–∞—Ç–µ–ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ –∑–∞–¥–∞—á: @Scrws, @hochuokroshku\n\n–ü—Ä–æ–µ–∫—Ç –≤—ã–ª–æ–∂–µ–Ω –Ω–∞ GitHub: https://github.com/JoMaska/Telegram-bot-taskbook')
    
@router.message(IsAdminFilter(), Command('cancel'))
async def cancel_cmd(msg: Message, state: FSMContext):
    await state.clear()
    await msg.answer('–î–µ–π—Å—Ç–≤–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ', reply_markup=get_admin_main_keyboard())

@router.message(~IsAdminFilter(), Command('cancel'))
async def cancel_cmd(msg: Message, state: FSMContext):
    await state.clear()
    await msg.answer('–î–µ–π—Å—Ç–≤–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ', reply_markup=ReplyKeyboardRemove())
